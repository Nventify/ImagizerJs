(function(t,e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define(e)}else{t.ImagizerClient=e();t.imagizerClient=t.ImagizerClient}})(this,function(){var t=90;var e=1;var i="demo.imagizercdn.com";var r="100vw";var a={datasrc:"data-src",datares:"data-res",src:"src",srcset:"srcset",sizes:"sizes"};var n={imagizerHost:i,autoDpr:false,format:null,quality:t,dpr:e,useHttps:false,originImageHost:null,attributeNames:a};function s(t){var e=document.querySelectorAll(t);for(var r=0;r<e.length;r++){if(e[r]){var s=e[r];var f=s.getAttribute(a.datasrc);if(f){var h=o(f);if(!n.originImageHost&&h.hostname&&h.hostname!=i){h.params.hostname=h.hostname}else if(n.originImageHost){h.params.hostname=n.originImageHost}if(s.getAttribute(a.datares)){u(s,h.path,h.params)}else{d(s,h.path,h.params)}}}}return this}function o(t){var e=document.createElement("a");e.href=t;return{scheme:e.protocol,hostname:e.host,path:e.pathname,params:f(e.search)}}function f(t){var e=t.split("?");t=e[1];return!t&&{}||t.replace(/(^\?)/,"").split("&").map(function(t){return t=t.split("="),this[t[0]]=t[1],this}.bind({}))[0]}function u(t,e,i){delete i.width;var n=[];for(var s=100;s<3e3;s+=100){i.width=s;i.dpr=1;n.push(m(e,i)+" "+i.width+"w")}t.setAttribute(a.srcset,n);if(!t.getAttribute(a.sizes)){t.setAttribute(a.sizes,r)}t.setAttribute(a.src,m(e))}function d(t,e,i){if(!t){return false}var r=m(e,i);var a=new Image;a.onload=function(){t.src=this.src;if(i.width){t.width=i.width}else if(i.height){t.height=i.height}if(i.height&&i.crop=="fit"){t.height=i.height}};a.src=r}function h(t){var e=[];for(var i in t){e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]))}return e.join("&")}function c(){var t=1;if(window!=undefined){t=window.devicePixelRatio?window.devicePixelRatio:1}return t}function m(i,r){if(r==undefined){r={}}if(!i.match(/^\//)){i+="/"+i}var a=n.useHttps?"https":"http";var s=a+"://"+n.imagizerHost+i;if(!r.dpr){if(n.autoDpr){r.dpr=c()}else{r.dpr=n.dpr}}if(r.dpr==e){delete r.dpr}if(n.quality!=t){r.quality=n.quality}if(n.format){r.format=n.format}if(!i.match(/\?/)){s+="?"}else{s+="&"}s+=h(r);return s}function l(t,e){var i=e.offsetWidth;var r=e.offsetHeight;return m(t,{width:i,height:r,crop:"fit"})}return{loadImages:s,config:n,buildUrl:m}});
